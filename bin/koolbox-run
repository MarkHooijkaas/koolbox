#!/bin/bash
set -e

image=$(basename $0)

function add_mount() {
    if [[ -d $1 ]]; then
        KOOLBOX_OPTIONS+=" -v $1:$1:Z"
    fi
}


KOOLBOX_OPTIONS+=" --env HOME"
KOOLBOX_OPTIONS+=" --workdir $(pwd)"

add_mount ${HOME}/.kube
add_mount ${HOME}/.azure
add_mount ${HOME}/.ssh
add_mount ${HOME}/.config
add_mount $(pwd)


echo Starting $image
podman run -it --rm  $KOOLBOX_OPTIONS $image "${@}"
